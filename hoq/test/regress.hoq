#
#  Synopsis:
#	Trivial regression test
#  Usage:
#	export LANG=C
#	PATH=.:$PATH
#	seq 1000 | ../src/hoq regress.hoq | sort | shasum
#	cat regress.sha1
#

command echo_bool("regress-echo");

command echo_line("regress-echo");

command echo_dollar1("regress-echo");

command xtrue("true");

exec xtrue()
  when
	# both are always true
	(
		true != false
		or
		true == true
		or
		false == false
		or
		false != true
	)
	and
	not (
		true == false
		and
		true != true
		and
		false != false
		and
		false == true
	)
	and
	true
	and
	not false
;

exec echo_bool(
	"true == true", true == true,

	"true == false", true == false,

	"false == true", false == true,

	"false == false", false == false,

	"true != true", true != true,

	"true != false", true != false,

	"false != true", false != true,

	"false != false", false != false,

	"true != true", true != true,

	"0 == 0", 0 == 0,
	"0 != 0", 0 != 0,

	"1 == 1", 1 == 1,
	"1 != 1", 1 != 1,

	"0 == 255", 0 == 255,
	"0 != 255", 0 != 255,

	"xtrue == 255", xtrue.exit_status == 255,
	"xtrue != 255", xtrue.exit_status != 255,

	"xtrue == 0", xtrue.exit_status == 0,
	"xtrue != 0", xtrue.exit_status != 0,

	"xtrue == 1", xtrue.exit_status == 1,
	"xtrue != 1", xtrue.exit_status != 1,

	"xtrue == 255", xtrue.exit_status == 255,
	"xtrue != 255", xtrue.exit_status != 255
);

exec echo_line("$0", $0)
  when
  	xtrue.exit_status == 0
;

exec echo_dollar1("$1", $1)
  when
  	xtrue.exit_status == 0
;
